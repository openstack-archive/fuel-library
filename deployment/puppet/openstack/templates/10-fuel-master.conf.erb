# managed by puppet

"/var/lib/docker/containers/*/*.log"
"/var/log/astute/*.log"
"/var/log/audit/audit.log"
"/var/log/auth.log"
"/var/log/cobbler/*.log"
"/var/log/cron*"
"/var/log/daemon.log"
"/var/log/debug"
"/var/log/docker"
"/var/log/docker-*.log"
"/var/log/dnsmasq.log"
"/var/log/fuelmenu.log"
"/var/log/httpd/*.log"
"/var/log/kern.log"
"/var/log/lastlog"
"/var/log/mail.log"
"/var/log/mcollective.log"
"/var/log/monit"
"/var/log/messages"
"/var/log/nailgun/*.log"
"/var/log/nailgun-agent.log"
"/var/log/nginx/*.log"
"/var/log/ostf*.log"
"/var/log/ostf/*.log"
"/var/log/rabbitmq/*.log"
"/var/log/remote/[1-9]*/*.log"
"/var/log/remote/[1-9]*/*/*.log"
"/var/log/rsync.log"
"/var/log/shotgun.log"
"/var/log/syslog"
"/var/log/user.log"
"/var/log/upstart/*.log"
"/var/log/yum.log"
"/var/log/wtmp"
{
  # truncate file, do not delete & recreate
  copytruncate

  # compress rotated files with gzip
  compress

  # ignore missing files
  missingok

  # do not rotate empty files
  notifempty

  # logrotate allows to use only year, month, day and unix epoch
  dateformat -%Y%m%d-%s

  # number of rotated files to keep
  rotate <%= @keep %>

  # do not rotate files unless both size and time conditions are met
  <%= @rotation %>
  minsize <%= @minsize %>

  # force rotate if filesize exceeded <%= @maxsize %>
  maxsize <%= @maxsize %>

  postrotate
      # send SIGHUP to all rsyslog instances, including ones in containers
      /usr/bin/pkill -HUP rsyslogd 2>/dev/null || true
  endscript
}
