<% @dhcp_ranges.each do |range| -%>

# <%= range['comment'] %>
subnet <%= range['netaddr'] %> netmask <%= range['netmask'] %> {
  range <%= range['start_address'] %> <%= range['end_address'] %>;
  option routers <%= range['gateway'] %>;
  option subnet-mask <%= range['netmask'] %>;
  option broadcast-address <%= range['broadcast'] %>;
  option domain-name-servers <%= @dns_address %>;
  option domain-name "<%= @domain_name %>";
  next-server <%= @next_server %>;
  default-lease-time 7200;
  max-lease-time 7200;
  ddns-hostname = concat("dhcp-",binary-to-ascii(10,8,"-", leased-address));
  class "pxeclients" {
    match if substring (option vendor-class-identifier, 0, 9) = "PXEClient";
      filename "pxelinux.0";
  }
}

<% end -%>