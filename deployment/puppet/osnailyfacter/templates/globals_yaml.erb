<% require "yaml" -%>
<% globals = {} -%>
<% globals.store "access", @access_hash -%>
<% globals.store "amqp_hosts", @amqp_hosts -%>
<% globals.store "amqp_port", @amqp_port -%>
<% globals.store "aodh_hash", @aodh -%>
<% globals.store "aodh_nodes", @aodh_nodes -%>
<% globals.store "apache_api_proxy_address", @apache_api_proxy_address -%>
<% globals.store "apache_ports", @apache_ports -%>
<% globals.store "base_mac", @base_mac -%>
<% globals.store "base_syslog", @base_syslog_hash -%>
<% globals.store "ceph_tuning_settings", @ceph_tuning_settings -%>
<% globals.store "ceph_monitor_nodes", @ceph_monitor_nodes -%>
<% globals.store "ceph_primary_monitor_node", @ceph_primary_monitor_node -%>
<% globals.store "ceph_rgw_nodes", @ceph_rgw_nodes -%>
<% globals.store "ceilometer", @real_ceilometer_hash -%>
<% globals.store "ceilometer_nodes", @ceilometer_nodes -%>
<% globals.store "cinder", @real_cinder_hash -%>
<% globals.store "cinder_nodes", @cinder_nodes -%>
<% globals.store "cinder_rate_limits", @cinder_rate_limits -%>
<% globals.store "corosync_roles", @corosync_roles -%>
<% globals.store "corosync_tags", @corosync_tags -%>
<% globals.store "custom_mysql_setup_class", @custom_mysql_setup_class -%>
<% globals.store "database_nodes", @database_nodes -%>
<% globals.store "debug", @debug -%>
<% globals.store "deployment_mode", @deployment_mode -%>
<% globals.store "dns_nameservers", @dns_nameservers -%>
<% globals.store "glance_backend", @glance_backend -%>
<% globals.store "glance", @glance_hash -%>
<% globals.store "glance_glare", @glance_glare_hash -%>
<% globals.store "glance_known_stores", @glance_known_stores -%>
<% globals.store "glance_nodes", @glance_nodes -%>
<% globals.store "heat", @heat_hash -%>
<% globals.store "heat_nodes", @heat_nodes -%>
<% globals.store "heat_roles", @heat_roles -%>
<% globals.store "horizon_nodes", @horizon_nodes -%>
<% globals.store "custom_theme_path", @custom_theme_path -%>
<% globals.store "node_name", @node_name -%>
<% globals.store "idle_timeout", @idle_timeout -%>
<% globals.store "keystone", @keystone_hash -%>
<% globals.store "keystone_nodes", @keystone_nodes -%>
<% globals.store "keystone_api", @keystone_api -%>
<% globals.store "manage_volumes", @manage_volumes -%>
<% globals.store "management_network_range", @management_network_range -%>
<% globals.store "master_ip", @master_ip -%>
<% globals.store "max_overflow", @max_overflow -%>
<% globals.store "max_pool_size", @max_pool_size -%>
<% globals.store "max_retries", @max_retries -%>
<% globals.store "mirror_type", @mirror_type -%>
<% globals.store "mountpoints", @mountpoints -%>
<% globals.store "mongo_roles", @mongo_roles -%>
<% globals.store "multi_host", @multi_host -%>
<% globals.store "murano", @murano_hash -%>
<% globals.store "murano_nodes", @murano_nodes -%>
<% globals.store "murano_roles", @murano_roles -%>
<% globals.store "mysql", @mysql_hash -%>
<% globals.store "network_config", @network_config -%>
<% globals.store "neutron_config", @real_neutron_config -%>
<% globals.store "neutron_db_password", @neutron_db_password -%>
<% globals.store "neutron_metadata_proxy_secret", @neutron_metadata_proxy_secret -%>
<% globals.store "neutron_nodes", @neutron_nodes -%>
<% globals.store "neutron_user_password", @neutron_user_password -%>
<% globals.store "node", @node_hash -%>
<% globals.store "nova_db_password", @nova_db_password -%>
<% globals.store "nova", @real_nova_hash -%>
<% globals.store "openstack_version", @openstack_version -%>
<% globals.store "primary_controller", @primary_controller -%>
<% globals.store "private_int", @private_int -%>
<% globals.store "queue_provider", @queue_provider -%>
<% globals.store "rabbit_ha_queues", @rabbit_ha_queues -%>
<% globals.store "rabbit", @real_rabbit_hash -%>
<% globals.store "roles", @roles -%>
<% globals.store "sahara", @sahara_hash -%>
<% globals.store "sahara_nodes", @sahara_nodes -%>
<% globals.store "sahara_roles", @sahara_roles -%>
<% globals.store "sql_connection", @sql_connection -%>
<% globals.store "storage", @storage_hash_real -%>
<% globals.store "swift", @swift_hash -%>
<% globals.store "syslog", @syslog_hash -%>
<% globals.store "default_log_levels", @default_log_levels -%>
<% globals.store "aodh::logging::default_log_levels", @default_log_levels -%>
<% globals.store "ceilometer::logging::default_log_levels", @default_log_levels -%>
<% globals.store "cinder::logging::default_log_levels", @default_log_levels -%>
<% globals.store "glance::api::logging::default_log_levels", @default_log_levels -%>
<% globals.store "glance::registry::logging::default_log_levels", @default_log_levels -%>
<% globals.store "heat::logging::default_log_levels", @default_log_levels -%>
<% globals.store "keystone::logging::default_log_levels", @default_log_levels -%>
<% globals.store "murano::logging::default_log_levels", @default_log_levels -%>
<% globals.store "nova::logging::default_log_levels", @default_log_levels -%>
<% globals.store "sahara::logging::default_log_levels", @default_log_levels -%>
<% globals.store "ironic::logging::default_log_levels", @default_log_levels -%>
<% globals.store "syslog_log_facility_aodh", @syslog_log_facility_aodh -%>
<% globals.store "syslog_log_facility_ceilometer", @syslog_log_facility_ceilometer -%>
<% globals.store "syslog_log_facility_ceph", @syslog_log_facility_ceph -%>
<% globals.store "syslog_log_facility_cinder", @syslog_log_facility_cinder -%>
<% globals.store "syslog_log_facility_glance", @syslog_log_facility_glance -%>
<% globals.store "syslog_log_facility_heat", @syslog_log_facility_heat -%>
<% globals.store "syslog_log_facility_keystone", @syslog_log_facility_keystone -%>
<% globals.store "syslog_log_facility_murano", @syslog_log_facility_murano -%>
<% globals.store "syslog_log_facility_neutron", @syslog_log_facility_neutron -%>
<% globals.store "syslog_log_facility_nova", @syslog_log_facility_nova -%>
<% globals.store "syslog_log_facility_sahara", @syslog_log_facility_sahara -%>
<% globals.store "syslog_log_facility_ironic", @syslog_log_facility_ironic -%>
<% globals.store "token_provider", @token_provider -%>
<% globals.store "use_ceilometer", @use_ceilometer -%>
<% globals.store "use_ovs", @use_ovs -%>
<% globals.store "use_syslog", @use_syslog -%>
<% globals.store "vcenter", @vcenter_hash -%>
<% globals.store "verbose", @verbose -%>
<% globals.store "vlan_start", @vlan_start -%>
<% globals.store "management_vip", @management_vip -%>
<% globals.store "database_vip", @database_vip -%>
<% globals.store "service_endpoint", @service_endpoint -%>
<% globals.store "public_vip", @public_vip -%>
<% globals.store "management_vrouter_vip", @management_vrouter_vip -%>
<% globals.store "public_vrouter_vip", @public_vrouter_vip -%>
<% globals.store "memcache_roles", @memcache_roles -%>
<% globals.store "memcached_addresses", @memcached_addresses -%>
<% globals.store "memcached_port", @memcached_port -%>
<% globals.store "memcached_servers", @memcached_servers -%>
<% globals.store "swift_master_role", @swift_master_role -%>
<% globals.store "swift_nodes", @swift_nodes -%>
<% globals.store "swift_proxies", @swift_proxies -%>
<% globals.store "is_primary_swift_proxy", @is_primary_swift_proxy -%>
<% globals.store "nova_api_nodes", @nova_api_nodes -%>
<% globals.store "ironic_api_nodes", @ironic_api_nodes -%>
<% globals.store "workers_max", @workers_max -%>
<% globals.store "kombu_compression", @kombu_compression -%>
<% globals.store "user_admin_role", @user_admin_role -%>
<% globals.store "user_admin_domain", @user_admin_domain -%>
<% # If we have no VIPs with 'haproxy' namespace, then we're using external LB
if @vips.select{|key, hash| hash['namespace'] == 'haproxy' }.length == 0
  globals.store "external_lb", true
else
  globals.store "external_lb", false
end -%>
<% globals.store "node_name_prefix_for_messaging", @node_name_prefix_for_messaging -%>

<%= YAML.dump globals %>
